<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Learning App</title>
    <style>
        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .page {
            display: none;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 30px;
            margin-top: 20px;
            animation: fadeIn 0.5s ease;
        }

        .active {
            display: block;
        }

        h1, h2, h3 {
            color: #4a4a4a;
            margin-bottom: 20px;
        }

        h1 {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            margin: 10px 5px;
        }

        button:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        button.secondary {
            background: #f8f9fa;
            color: #667eea;
            border: 1px solid #667eea;
        }

        button.secondary:hover {
            background: #e9ecef;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }

        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .learning-styles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .learning-style-card {
            text-align: center;
            padding: 30px 20px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .learning-style-card:hover {
            transform: scale(1.05);
        }

        .learning-style-card.visual {
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
        }

        .learning-style-card.auditory {
            background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
        }

        .learning-style-card.reading {
            background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%);
        }

        .learning-style-card.kinesthetic {
            background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);
        }

        .style-icon {
            font-size: 40px;
            margin-bottom: 15px;
        }

        .genres-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .genre-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            padding: 25px 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .genre-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .lesson-content {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .visual-content, .auditory-content, .reading-content, .kinesthetic-content {
            display: none;
        }

        .quiz-question {
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .quiz-option {
            padding: 15px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .quiz-option:hover {
            background: #e9ecef;
        }

        .quiz-option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .progress-bar {
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #667eea;
            margin: 10px 0;
        }

        .achievement-badge {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            margin: 5px;
            font-size: 14px;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .feedback {
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-weight: bold;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .learning-styles, .genres-grid, .dashboard-stats {
                grid-template-columns: 1fr;
            }
            
            .nav-buttons {
                flex-direction: column;
            }
            
            button {
                width: 100%;
                margin: 5px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>English Learning App</h1>
        
        <!-- Login/Registration Page -->
        <div id="login-page" class="page active">
            <h2>Welcome to English Learning</h2>
            <div class="form-group">
                <label for="username">Username:</label>
                <input type="text" id="username" placeholder="Enter your username">
            </div>
            <div class="form-group">
                <label for="password">Password:</label>
                <input type="password" id="password" placeholder="Enter your password">
            </div>
            <div class="form-group">
                <label for="email">Email (for registration):</label>
                <input type="email" id="email" placeholder="Enter your email">
            </div>
            <button id="login-btn">Login</button>
            <button id="register-btn" class="secondary">Register</button>
            <p id="login-message" style="margin-top: 15px; text-align: center;"></p>
        </div>
        
        <!-- Learning Style Selection Page -->
        <div id="style-page" class="page">
            <h2>Choose Your Learning Style</h2>
            <p>Select the learning style that works best for you. The content will be adapted to match your preference.</p>
            
            <div class="learning-styles">
                <div class="learning-style-card visual" data-style="visual">
                    <div class="style-icon">üëÅÔ∏è</div>
                    <h3>Visual</h3>
                    <p>Learn through videos, images, and infographics</p>
                </div>
                
                <div class="learning-style-card auditory" data-style="auditory">
                    <div class="style-icon">üëÇ</div>
                    <h3>Auditory</h3>
                    <p>Learn through audio explanations and listening tasks</p>
                </div>
                
                <div class="learning-style-card reading" data-style="reading">
                    <div class="style-icon">üìñ</div>
                    <h3>Reading/Writing</h3>
                    <p>Learn through texts and comprehension exercises</p>
                </div>
                
                <div class="learning-style-card kinesthetic" data-style="kinesthetic">
                    <div class="style-icon">‚úã</div>
                    <h3>Kinesthetic</h3>
                    <p>Learn through interactive activities and simulations</p>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button id="back-to-login" class="secondary">Back to Login</button>
            </div>
        </div>
        
        <!-- Main Menu Page -->
        <div id="menu-page" class="page">
            <h2>Main Menu</h2>
            <p>Welcome, <span id="user-display">User</span>! Your learning style: <span id="style-display">Visual</span></p>
            
            <div class="dashboard-stats">
                <div class="stat-card">
                    <h3>Completed Lessons</h3>
                    <div class="stat-value" id="completed-lessons">0</div>
                    <p>out of 12 total</p>
                </div>
                <div class="stat-card">
                    <h3>Average Score</h3>
                    <div class="stat-value" id="average-score">0%</div>
                    <p>on quizzes</p>
                </div>
                <div class="stat-card">
                    <h3>Learning Streak</h3>
                    <div class="stat-value" id="learning-streak">0</div>
                    <p>consecutive days</p>
                </div>
            </div>
            
            <h3>Your Achievements</h3>
            <div id="achievements-container">
                <!-- Achievements will be populated by JavaScript -->
            </div>
            
            <h3>Select a Genre to Learn</h3>
            <div class="genres-grid">
                <div class="genre-card" data-genre="narrative">
                    <h3>Narrative</h3>
                    <p>Stories and storytelling</p>
                </div>
                <div class="genre-card" data-genre="recount">
                    <h3>Recount</h3>
                    <p>Retelling past events</p>
                </div>
                <div class="genre-card" data-genre="descriptive">
                    <h3>Descriptive</h3>
                    <p>Describing people, places, things</p>
                </div>
                <div class="genre-card" data-genre="report">
                    <h3>Report</h3>
                    <p>Presenting information</p>
                </div>
                <div class="genre-card" data-genre="procedure">
                    <h3>Procedure</h3>
                    <p>Instructions and how-to guides</p>
                </div>
                <div class="genre-card" data-genre="explanation">
                    <h3>Explanation</h3>
                    <p>Explaining how things work</p>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button id="logout-btn" class="secondary">Logout</button>
            </div>
        </div>
        
        <!-- Lesson Page -->
        <div id="lesson-page" class="page">
            <h2 id="lesson-title">Lesson Title</h2>
            <p id="lesson-description">Lesson description will appear here</p>
            
            <div class="progress-bar">
                <div class="progress" id="lesson-progress" style="width: 0%"></div>
            </div>
            
            <div class="lesson-content">
                <div class="visual-content">
                    <h3>Visual Content</h3>
                    <div style="text-align: center; margin: 20px 0;">
                        <div style="background: #e9ecef; height: 200px; display: flex; align-items: center; justify-content: center; border-radius: 10px; margin-bottom: 20px;">
                            <p>Video or Infographic Placeholder</p>
                        </div>
                        <p>Watch the video above to understand the concept.</p>
                    </div>
                </div>
                
                <div class="auditory-content">
                    <h3>Auditory Content</h3>
                    <div style="text-align: center; margin: 20px 0;">
                        <div style="background: #e9ecef; height: 100px; display: flex; align-items: center; justify-content: center; border-radius: 10px; margin-bottom: 20px;">
                            <p>Audio Player Placeholder</p>
                        </div>
                        <p>Listen to the audio explanation carefully.</p>
                    </div>
                </div>
                
                <div class="reading-content">
                    <h3>Reading Content</h3>
                    <div style="padding: 20px; background: white; border-radius: 10px; border-left: 4px solid #667eea;">
                        <p id="reading-text">Reading text will appear here based on the selected genre and lesson.</p>
                    </div>
                    <div style="margin-top: 20px;">
                        <h4>Comprehension Questions</h4>
                        <div id="comprehension-questions">
                            <!-- Questions will be added by JavaScript -->
                        </div>
                    </div>
                </div>
                
                <div class="kinesthetic-content">
                    <h3>Kinesthetic Activity</h3>
                    <div style="text-align: center; margin: 20px 0;">
                        <div id="drag-drop-area" style="background: #e9ecef; height: 200px; display: flex; align-items: center; justify-content: center; border-radius: 10px; margin-bottom: 20px; flex-direction: column;">
                            <p>Drag and Drop Activity Placeholder</p>
                            <div style="display: flex; gap: 10px; margin-top: 20px;">
                                <div style="padding: 10px; background: white; border-radius: 5px; cursor: move;">Word 1</div>
                                <div style="padding: 10px; background: white; border-radius: 5px; cursor: move;">Word 2</div>
                                <div style="padding: 10px; background: white; border-radius: 5px; cursor: move;">Word 3</div>
                            </div>
                        </div>
                        <p>Drag the words to form a correct sentence.</p>
                    </div>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button id="back-to-menu" class="secondary">Back to Menu</button>
                <button id="take-quiz">Take Quiz</button>
            </div>
        </div>
        
        <!-- Quiz Page -->
        <div id="quiz-page" class="page">
            <h2 id="quiz-title">Quiz</h2>
            <p>Test your understanding of the lesson</p>
            
            <div class="progress-bar">
                <div class="progress" id="quiz-progress" style="width: 0%"></div>
            </div>
            
            <div id="quiz-container">
                <!-- Quiz questions will be populated by JavaScript -->
            </div>
            
            <div class="nav-buttons">
                <button id="back-to-lesson" class="secondary">Back to Lesson</button>
                <button id="submit-quiz">Submit Quiz</button>
            </div>
        </div>
        
        <!-- Results Page -->
        <div id="results-page" class="page">
            <h2>Quiz Results</h2>
            
            <div style="text-align: center; margin: 30px 0;">
                <div style="font-size: 4rem; margin-bottom: 20px;" id="results-emoji">üéâ</div>
                <h3 id="results-message">Great job!</h3>
                <div class="stat-value" id="quiz-score">0%</div>
                <p>You scored <span id="correct-answers">0</span> out of <span id="total-questions">0</span> questions correctly</p>
            </div>
            
            <div class="feedback" id="results-feedback">
                <!-- Feedback will be added by JavaScript -->
            </div>
            
            <h3>Review Your Answers</h3>
            <div id="answers-review">
                <!-- Answer review will be populated by JavaScript -->
            </div>
            
            <div class="nav-buttons">
                <button id="retry-quiz" class="secondary">Retry Quiz</button>
                <button id="back-to-menu-from-results">Back to Menu</button>
                <button id="next-lesson">Next Lesson</button>
            </div>
        </div>
    </div>

    <script>
        // App State
        const appState = {
            currentUser: null,
            learningStyle: null,
            currentGenre: null,
            currentLesson: null,
            userProgress: {
                completedLessons: 0,
                averageScore: 0,
                learningStreak: 0,
                achievements: []
            },
            quizAnswers: [],
            currentQuizQuestion: 0
        };

        // Sample Data
        const lessonsData = {
            narrative: {
                title: "Narrative Writing",
                description: "Learn how to tell engaging stories",
                content: {
                    visual: "Visual content for narrative writing: story structure infographic",
                    auditory: "Audio explanation of narrative elements and examples",
                    reading: "Narrative text: 'The Lost Key' - Once upon a time, a young girl named Lily lost her golden key. She searched everywhere in her house but couldn't find it. Finally, she remembered she had been playing in the garden. She rushed outside and found the key shining under the morning sun.",
                    kinesthetic: "Drag and drop activity: Arrange story events in correct order"
                },
                quiz: [
                    {
                        question: "What is the main purpose of narrative writing?",
                        options: [
                            "To inform the reader",
                            "To tell a story",
                            "To describe a place",
                            "To explain a process"
                        ],
                        correct: 1
                    },
                    {
                        question: "Which element is most important in a narrative?",
                        options: [
                            "Facts and statistics",
                            "Characters and plot",
                            "Instructions",
                            "Definitions"
                        ],
                        correct: 1
                    },
                    {
                        question: "What tense is typically used in narratives?",
                        options: [
                            "Present tense",
                            "Future tense",
                            "Past tense",
                            "Conditional tense"
                        ],
                        correct: 2
                    }
                ]
            },
            recount: {
                title: "Recount Writing",
                description: "Learn how to retell past events effectively",
                content: {
                    visual: "Visual content for recount writing: timeline of events",
                    auditory: "Audio explanation of recount structure with examples",
                    reading: "Recount text: 'My Weekend Trip' - Last weekend, my family and I went to the beach. The weather was perfect with clear blue skies. We built sandcastles, swam in the ocean, and had a picnic. In the evening, we watched the sunset before heading home tired but happy.",
                    kinesthetic: "Interactive activity: Sequence events from a personal experience"
                },
                quiz: [
                    {
                        question: "What is the main purpose of a recount?",
                        options: [
                            "To persuade the reader",
                            "To retell past events",
                            "To describe a person",
                            "To explain how something works"
                        ],
                        correct: 1
                    },
                    {
                        question: "Which of these is a key feature of recounts?",
                        options: [
                            "Chronological order",
                            "Problem and solution",
                            "Comparisons",
                            "Hypothetical situations"
                        ],
                        correct: 0
                    },
                    {
                        question: "What perspective are recounts usually written from?",
                        options: [
                            "Second person",
                            "Third person omniscient",
                            "First person",
                            "Objective observer"
                        ],
                        correct: 2
                    }
                ]
            },
            descriptive: {
                title: "Descriptive Writing",
                description: "Learn how to create vivid descriptions",
                content: {
                    visual: "Visual content for descriptive writing: image with descriptive labels",
                    auditory: "Audio description of a scene with emphasis on sensory details",
                    reading: "Descriptive text: 'My Best Friend' - My best friend Sarah has long, wavy brown hair that shines in the sunlight. Her bright blue eyes sparkle when she laughs. She is tall and athletic, always wearing comfortable clothes. Her voice is warm and friendly, making everyone feel at ease around her.",
                    kinesthetic: "Drag and drop activity: Match adjectives to appropriate nouns"
                },
                quiz: [
                    {
                        question: "What is the main goal of descriptive writing?",
                        options: [
                            "To convince the reader",
                            "To create a vivid picture",
                            "To explain a process",
                            "To tell a story"
                        ],
                        correct: 1
                    },
                    {
                        question: "Which senses should descriptive writing appeal to?",
                        options: [
                            "Only sight",
                            "Sight and sound",
                            "All five senses",
                            "Only hearing"
                        ],
                        correct: 2
                    },
                    {
                        question: "What type of language is most important in descriptive writing?",
                        options: [
                            "Technical terms",
                            "Figurative language",
                            "Simple vocabulary",
                            "Formal language"
                        ],
                        correct: 1
                    }
                ]
            }
        };

        const achievements = [
            { id: 1, name: "First Lesson", description: "Complete your first lesson" },
            { id: 2, name: "Quiz Master", description: "Score 100% on a quiz" },
            { id: 3, name: "Genre Explorer", description: "Complete lessons in 3 different genres" },
            { id: 4, name: "Consistent Learner", description: "Maintain a 5-day learning streak" },
            { id: 5, name: "Visual Learner", description: "Complete 5 visual-style lessons" },
            { id: 6, name: "Reading Champion", description: "Complete 5 reading-style lessons" }
        ];

        // DOM Elements
        const pages = {
            login: document.getElementById('login-page'),
            style: document.getElementById('style-page'),
            menu: document.getElementById('menu-page'),
            lesson: document.getElementById('lesson-page'),
            quiz: document.getElementById('quiz-page'),
            results: document.getElementById('results-page')
        };

        // Navigation Functions
        function showPage(pageId) {
            // Hide all pages
            Object.values(pages).forEach(page => {
                page.classList.remove('active');
            });
            
            // Show the requested page
            pages[pageId].classList.add('active');
        }

        // Initialize the app
        function initApp() {
            // Check if user is already logged in (from localStorage)
            const savedUser = localStorage.getItem('currentUser');
            const savedStyle = localStorage.getItem('learningStyle');
            
            if (savedUser && savedStyle) {
                appState.currentUser = savedUser;
                appState.learningStyle = savedStyle;
                loadUserProgress();
                showPage('menu');
                updateMenuDisplay();
            } else {
                showPage('login');
            }
            
            setupEventListeners();
        }

        // Set up event listeners
        function setupEventListeners() {
            // Login/Registration
            document.getElementById('login-btn').addEventListener('click', handleLogin);
            document.getElementById('register-btn').addEventListener('click', handleRegister);
            
            // Learning style selection
            document.querySelectorAll('.learning-style-card').forEach(card => {
                card.addEventListener('click', function() {
                    const style = this.getAttribute('data-style');
                    selectLearningStyle(style);
                });
            });
            
            // Navigation
            document.getElementById('back-to-login').addEventListener('click', () => showPage('login'));
            document.getElementById('logout-btn').addEventListener('click', handleLogout);
            document.getElementById('back-to-menu').addEventListener('click', () => showPage('menu'));
            document.getElementById('back-to-menu-from-results').addEventListener('click', () => showPage('menu'));
            document.getElementById('back-to-lesson').addEventListener('click', () => showPage('lesson'));
            
            // Genre selection
            document.querySelectorAll('.genre-card').forEach(card => {
                card.addEventListener('click', function() {
                    const genre = this.getAttribute('data-genre');
                    startLesson(genre);
                });
            });
            
            // Quiz
            document.getElementById('take-quiz').addEventListener('click', startQuiz);
            document.getElementById('submit-quiz').addEventListener('click', submitQuiz);
            document.getElementById('retry-quiz').addEventListener('click', retryQuiz);
            document.getElementById('next-lesson').addEventListener('click', nextLesson);
        }

        // Login handler
        function handleLogin() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (!username || !password) {
                document.getElementById('login-message').textContent = 'Please enter both username and password';
                document.getElementById('login-message').style.color = 'red';
                return;
            }
            
            // Simple validation (in a real app, this would check against a database)
            if (password.length < 4) {
                document.getElementById('login-message').textContent = 'Password must be at least 4 characters';
                document.getElementById('login-message').style.color = 'red';
                return;
            }
            
            appState.currentUser = username;
            localStorage.setItem('currentUser', username);
            
            // Check if user has already selected a learning style
            const savedStyle = localStorage.getItem('learningStyle');
            if (savedStyle) {
                appState.learningStyle = savedStyle;
                loadUserProgress();
                showPage('menu');
                updateMenuDisplay();
            } else {
                showPage('style');
            }
        }

        // Registration handler
        function handleRegister() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const email = document.getElementById('email').value;
            
            if (!username || !password || !email) {
                document.getElementById('login-message').textContent = 'Please fill in all fields';
                document.getElementById('login-message').style.color = 'red';
                return;
            }
            
            if (password.length < 4) {
                document.getElementById('login-message').textContent = 'Password must be at least 4 characters';
                document.getElementById('login-message').style.color = 'red';
                return;
            }
            
            if (!email.includes('@')) {
                document.getElementById('login-message').textContent = 'Please enter a valid email';
                document.getElementById('login-message').style.color = 'red';
                return;
            }
            
            // In a real app, this would send data to a server
            appState.currentUser = username;
            localStorage.setItem('currentUser', username);
            
            document.getElementById('login-message').textContent = 'Registration successful! Please select your learning style.';
            document.getElementById('login-message').style.color = 'green';
            
            showPage('style');
        }

        // Learning style selection
        function selectLearningStyle(style) {
            appState.learningStyle = style;
            localStorage.setItem('learningStyle', style);
            
            // Initialize user progress
            initializeUserProgress();
            
            showPage('menu');
            updateMenuDisplay();
        }

        // Initialize user progress
        function initializeUserProgress() {
            appState.userProgress = {
                completedLessons: 0,
                averageScore: 0,
                learningStreak: 1,
                achievements: [1] // First lesson achievement
            };
            
            saveUserProgress();
        }

        // Load user progress from localStorage
        function loadUserProgress() {
            const savedProgress = localStorage.getItem('userProgress');
            if (savedProgress) {
                appState.userProgress = JSON.parse(savedProgress);
            }
        }

        // Save user progress to localStorage
        function saveUserProgress() {
            localStorage.setItem('userProgress', JSON.stringify(appState.userProgress));
        }

        // Update menu display with user info and progress
        function updateMenuDisplay() {
            document.getElementById('user-display').textContent = appState.currentUser;
            document.getElementById('style-display').textContent = appState.learningStyle;
            
            // Update progress stats
            document.getElementById('completed-lessons').textContent = appState.userProgress.completedLessons;
            document.getElementById('average-score').textContent = `${appState.userProgress.averageScore}%`;
            document.getElementById('learning-streak').textContent = appState.userProgress.learningStreak;
            
            // Update achievements
            const achievementsContainer = document.getElementById('achievements-container');
            achievementsContainer.innerHTML = '';
            
            appState.userProgress.achievements.forEach(achievementId => {
                const achievement = achievements.find(a => a.id === achievementId);
                if (achievement) {
                    const badge = document.createElement('span');
                    badge.className = 'achievement-badge';
                    badge.textContent = achievement.name;
                    badge.title = achievement.description;
                    achievementsContainer.appendChild(badge);
                }
            });
            
            if (achievementsContainer.children.length === 0) {
                achievementsContainer.innerHTML = '<p>No achievements yet. Complete lessons to earn achievements!</p>';
            }
        }

        // Start a lesson
        function startLesson(genre) {
            if (!lessonsData[genre]) {
                alert('Lesson content not available for this genre yet.');
                return;
            }
            
            appState.currentGenre = genre;
            appState.currentLesson = lessonsData[genre];
            
            // Update lesson page
            document.getElementById('lesson-title').textContent = appState.currentLesson.title;
            document.getElementById('lesson-description').textContent = appState.currentLesson.description;
            
            // Hide all content types
            document.querySelectorAll('.visual-content, .auditory-content, .reading-content, .kinesthetic-content')
                .forEach(el => el.style.display = 'none');
            
            // Show content based on learning style
            const contentElement = document.querySelector(`.${appState.learningStyle}-content`);
            if (contentElement) {
                contentElement.style.display = 'block';
                
                // Update content based on style
                if (appState.learningStyle === 'reading') {
                    document.getElementById('reading-text').textContent = appState.currentLesson.content.reading;
                    
                    // Add comprehension questions for reading style
                    const questionsContainer = document.getElementById('comprehension-questions');
                    questionsContainer.innerHTML = '<p>Comprehension questions would appear here in a full implementation.</p>';
                }
            }
            
            // Reset progress bar
            document.getElementById('lesson-progress').style.width = '0%';
            
            showPage('lesson');
        }

        // Start quiz
        function startQuiz() {
            appState.quizAnswers = [];
            appState.currentQuizQuestion = 0;
            
            document.getElementById('quiz-title').textContent = `Quiz: ${appState.currentLesson.title}`;
            
            loadQuizQuestion(0);
            showPage('quiz');
        }

        // Load a quiz question
        function loadQuizQuestion(index) {
            const quizContainer = document.getElementById('quiz-container');
            const question = appState.currentLesson.quiz[index];
            
            if (!question) return;
            
            // Update progress
            const progress = ((index) / appState.currentLesson.quiz.length) * 100;
            document.getElementById('quiz-progress').style.width = `${progress}%`;
            
            quizContainer.innerHTML = `
                <div class="quiz-question">
                    <h3>Question ${index + 1} of ${appState.currentLesson.quiz.length}</h3>
                    <p>${question.question}</p>
                    <div class="quiz-options">
                        ${question.options.map((option, i) => `
                            <div class="quiz-option" data-option="${i}">${option}</div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            // Add event listeners to options
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.addEventListener('click', function() {
                    // Remove selected class from all options
                    document.querySelectorAll('.quiz-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Add selected class to clicked option
                    this.classList.add('selected');
                    
                    // Store the answer
                    appState.quizAnswers[index] = parseInt(this.getAttribute('data-option'));
                });
            });
        }

        // Submit quiz
        function submitQuiz() {
            // Check if all questions are answered
            if (appState.quizAnswers.length < appState.currentLesson.quiz.length) {
                alert('Please answer all questions before submitting.');
                return;
            }
            
            // Calculate score
            let correctAnswers = 0;
            appState.currentLesson.quiz.forEach((question, index) => {
                if (appState.quizAnswers[index] === question.correct) {
                    correctAnswers++;
                }
            });
            
            const score = (correctAnswers / appState.currentLesson.quiz.length) * 100;
            
            // Update user progress
            appState.userProgress.completedLessons++;
            appState.userProgress.averageScore = Math.round(
                (appState.userProgress.averageScore * (appState.userProgress.completedLessons - 1) + score) / 
                appState.userProgress.completedLessons
            );
            
            // Check for achievements
            if (score === 100 && !appState.userProgress.achievements.includes(2)) {
                appState.userProgress.achievements.push(2);
            }
            
            if (appState.userProgress.completedLessons >= 3 && !appState.userProgress.achievements.includes(3)) {
                appState.userProgress.achievements.push(3);
            }
            
            // Save progress
            saveUserProgress();
            
            // Show results
            showQuizResults(score, correctAnswers);
        }

        // Show quiz results
        function showQuizResults(score, correctAnswers) {
            document.getElementById('quiz-score').textContent = `${Math.round(score)}%`;
            document.getElementById('correct-answers').textContent = correctAnswers;
            document.getElementById('total-questions').textContent = appState.currentLesson.quiz.length;
            
            // Set results message and emoji based on score
            let message, emoji;
            if (score >= 90) {
                message = "Excellent work!";
                emoji = "üéâ";
            } else if (score >= 70) {
                message = "Good job!";
                emoji = "üëç";
            } else if (score >= 50) {
                message = "Not bad, keep practicing!";
                emoji = "üí™";
            } else {
                message = "Keep studying and try again!";
                emoji = "üìö";
            }
            
            document.getElementById('results-message').textContent = message;
            document.getElementById('results-emoji').textContent = emoji;
            
            // Add feedback
            const feedback = document.getElementById('results-feedback');
            feedback.textContent = `You scored ${Math.round(score)}% on this quiz. ${message}`;
            feedback.className = `feedback ${score >= 70 ? 'correct' : 'incorrect'}`;
            
            // Show answer review
            const reviewContainer = document.getElementById('answers-review');
            reviewContainer.innerHTML = '';
            
            appState.currentLesson.quiz.forEach((question, index) => {
                const userAnswer = appState.quizAnswers[index];
                const isCorrect = userAnswer === question.correct;
                
                const reviewItem = document.createElement('div');
                reviewItem.className = `quiz-question ${isCorrect ? 'correct' : 'incorrect'}`;
                reviewItem.style.borderLeft = isCorrect ? '4px solid #28a745' : '4px solid #dc3545';
                
                reviewItem.innerHTML = `
                    <h4>Question ${index + 1}</h4>
                    <p>${question.question}</p>
                    <p><strong>Your answer:</strong> ${question.options[userAnswer]}</p>
                    <p><strong>Correct answer:</strong> ${question.options[question.correct]}</p>
                `;
                
                reviewContainer.appendChild(reviewItem);
            });
            
            showPage('results');
        }

        // Retry quiz
        function retryQuiz() {
            startQuiz();
        }

        // Next lesson
        function nextLesson() {
            // In a full implementation, this would load the next lesson
            alert('Next lesson feature would be implemented in a full version');
            showPage('menu');
            updateMenuDisplay();
        }

        // Logout handler
        function handleLogout() {
            appState.currentUser = null;
            appState.learningStyle = null;
            localStorage.removeItem('currentUser');
            localStorage.removeItem('learningStyle');
            showPage('login');
            
            // Clear form fields
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            document.getElementById('email').value = '';
            document.getElementById('login-message').textContent = '';
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
